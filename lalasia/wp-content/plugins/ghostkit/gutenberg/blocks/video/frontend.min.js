!function(){"use strict";const{GHOSTKIT:e,jQuery:t}=window,o=t(document);function i(){t(".ghostkit-video-fullscreen:visible .ghostkit-video-fullscreen-frame").each((function(){const e=t(this),o=e.data("ghostkit-video-aspect-ratio")||16/9;let i,n;o>window.innerWidth/window.innerHeight?(i=.9*window.innerWidth,n=i/o):(n=.9*window.innerHeight,i=n*o),e.css({width:i,height:n,top:(window.innerHeight-n)/2,left:(window.innerWidth-i)/2})}))}const n=function(e,t,o){var i,n=o||{},a=n.noTrailing,s=void 0!==a&&a,l=n.noLeading,d=void 0!==l&&l,r=n.debounceMode,c=void 0===r?void 0:r,v=!1,u=0;function g(){i&&clearTimeout(i)}function p(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];var l=this,r=Date.now()-u;function p(){u=Date.now(),t.apply(l,n)}function h(){i=void 0}v||(d||!c||i||p(),g(),void 0===c&&r>e?d?(u=Date.now(),s||(i=setTimeout(c?h:p,e))):p():!0!==s&&(i=setTimeout(c?h:p,void 0===c?e-r:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly,o=void 0!==t&&t;g(),v=!o},p}(200,(a=()=>{i()},s=[],l=null,d=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];s=t,l||(l=requestAnimationFrame((function(){l=null,a.apply(void 0,s)})))},d.cancel=function(){l&&(cancelAnimationFrame(l),l=null)},d));var a,s,l,d;t(window).on("DOMContentLoaded load resize orientationchange",(()=>{n()})),o.on("initBlocks.ghostkit",((o,n)=>{void 0!==window.VideoWorker&&(e.triggerEvent("beforePrepareVideo",n),t(".ghostkit-video:not(.ghostkit-video-ready)").each((function(){const e=t(this).addClass("ghostkit-video-ready"),o=e.attr("data-video"),a=e.attr("data-click-action"),s="true"===e.attr("data-video-autoplay"),l="true"===e.attr("data-video-autopause"),d="true"===e.attr("data-video-loop");let r=e.find(".ghostkit-video-fullscreen-close-icon");r=r.length?r.html():e.attr("data-fullscreen-action-close-icon")?'<span class="'.concat(e.attr("data-fullscreen-action-close-icon"),'"></span>'):"";const c=e.attr("data-fullscreen-background-color");let v=e.find(".ghostkit-video-poster"),u=!1,g=!1,p=0,h=e.attr("data-video-aspect-ratio");h=h&&h.split(":")[0]&&h.split(":")[1]?h.split(":")[0]/h.split(":")[1]:16/9,parseFloat(e.attr("data-video-volume"))||(p=1),s&&(p=1);const f=new window.VideoWorker(o,{autoplay:0,loop:d,mute:p,volume:parseFloat(e.attr("data-video-volume"))||0,showContols:1});if(f&&f.isValid()){let o=0,d=0,p=!1;e.on("click",(()=>{d||(d=1,"fullscreen"===a?o?u&&(e.removeClass("ghostkit-video-fullscreen-closed"),u.fadeIn(200),f.play()):(e.addClass("ghostkit-video-loading"),f.getIframe((o=>{g=t(o);const n=g.parent();u=t('<div class="ghostkit-video-fullscreen" style="background-color: '.concat(c,';">')).appendTo("body").append(t('<div class="ghostkit-video-fullscreen-close">'.concat(r,"</div>"))).append(t('<div class="ghostkit-video-fullscreen-frame">').append(g)),u.data("ghostkit-video-aspect-ratio",h),n.remove(),u.fadeIn(200),u.on("click",(o=>{const i=t(o.target);(i.hasClass("ghostkit-video-fullscreen")||i.hasClass("ghostkit-video-fullscreen-close")||i.closest(".ghostkit-video-fullscreen-close").length)&&(f.pause(),u.fadeOut(200),e.addClass("ghostkit-video-fullscreen-closed"))})),i()})),o=1):o?f.play():(e.addClass("ghostkit-video-loading"),f.getIframe((o=>{g=t(o);const i=g.parent();t('<div class="ghostkit-video-frame">').appendTo(e).append(g),i.remove()})),o=1))})),v.length||e.hasClass("is-style-icon-only")||f.getImageURL((o=>{v=t('<div class="ghostkit-video-poster"><img src="'.concat(o,'" alt=""></div>')),e.append(v)}));let k=!1;f.on("ready",(()=>{e.removeClass("ghostkit-video-loading"),"fullscreen"===a?e.hasClass("ghostkit-video-fullscreen-closed")||f.play():(e.addClass("ghostkit-video-playing"),f.play())})),f.on("play",(()=>{p=!0})),f.on("pause",(()=>{p=!1,k=!0,"fullscreen"===a&&(d=0)})),"fullscreen"!==a&&(s||l)&&n.throttleScroll((()=>{!k&&!p&&s&&n.isElementInViewport(e[0],.6)&&(d?f.play():e.click()),p&&l&&!n.isElementInViewport(e[0],.6)&&f.pause()}))}})),e.triggerEvent("afterPrepareVideo",n))}))}();